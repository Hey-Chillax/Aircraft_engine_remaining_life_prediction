# 飞机发动机剩余寿命预测项目 - 架构概览

> **快速上手指南** | 项目结构一览 | 工作流程说明  
> 最后更新: 2025年 | 总字数: ~900字

---

## 📋 一、项目概述

**项目名称**: 航空发动机剩余寿命预测 (Aircraft Engine RUL Prediction)  
**核心任务**: 基于NASA C-MAPSS涡扇发动机传感器数据,预测发动机剩余使用寿命(RUL)  
**技术栈**: Python 3.12 + PyTorch + scikit-learn + pandas  
**依赖管理**: uv

---

## 📁 二、目录结构与功能说明

### 2.1 核心目录

```
Aircraft_engine_remaining_life_prediction/
├── Data/                    # 数据存储目录
├── src/                     # 源代码目录
├── models/                  # 模型文件存储(第一版)
├── models_2/                # 模型文件存储(第二版优化)
├── results/                 # 训练结果与可视化
├── documentation/           # 项目文档
├── augment_caption/         # 说明文档
├── augment_test/            # 测试脚本
└── main.py                  # 主程序入口
```

### 2.2 各目录详细说明

#### **Data/** - 数据文件夹
- **原始数据**:
  - `train_FD001.csv`: 训练集(100台发动机,20,631条记录)
  - `test_FD001.csv`: 测试集(100台发动机,13,096条记录)
  - `RUL_FD001.csv`: 测试集真实RUL标签(100个值)

- **预处理数据**:
  - `processed_train_full.csv`: 完整特征训练集(标准化后)
  - `processed_train_reduced.csv`: 降维特征训练集(移除高相关性特征)
  - `processed_test_full.csv`: 完整特征测试集
  - `processed_test_reduced.csv`: 降维特征测试集
  - `normalization_params.json`: 标准化参数(均值、标准差)

#### **src/** - 源代码目录
核心模块按功能划分:

1. **数据处理模块**:
   - `data_preprocessing.py`: 数据预处理类(标准化、特征过滤、RUL计算)
   - `data_loader.py`: 数据加载器(时间序列窗口构建、批次生成)
   - `data_visualization.py`: 数据可视化(趋势图、热力图、分布图)

2. **模型定义模块**:
   - `models.py`: 深度学习模型定义(LSTM、Transformer、位置编码)

3. **训练模块**:
   - `train_random_forest.py`: 随机森林模型训练
   - `train_deep_learning.py`: 深度学习模型训练(第一版)
   - `train_deep_learning_v2.py`: 深度学习模型训练(第二版优化)
   - `train_all_models.py`: 批量训练所有模型(第一版)
   - `train_all_models_v2.py`: 批量训练所有模型(第二版)

4. **可视化与报告模块**:
   - `visualize_results.py`: 训练结果可视化(损失曲线、预测散点图)
   - `visualize_results_v2.py`: 第二版可视化
   - `generate_report.py`: 自动生成训练总结报告
   - `generate_report_v2.py`: 第二版报告生成

5. **执行脚本**:
   - `run_preprocessing_and_visualization.py`: 一键执行数据预处理和可视化

#### **models/** 和 **models_2/** - 模型存储
- **models/**: 第一版训练的12个模型
  - 随机森林: 2个模型(full/reduced)
  - LSTM: 4个模型(full/reduced × 早停/不早停)
  - Transformer: 4个模型(full/reduced × 早停/不早停)

- **models_2/**: 第二版优化训练的48个模型
  - 模型规模: small/large(不同隐藏层维度)
  - 序列长度: seq30/seq50(不同时间窗口)
  - 特征版本: full/reduced
  - 训练策略: 早停/不早停

#### **results/** - 结果输出
- **training_curves/**: 训练损失曲线图
- **training_logs/**: 训练日志(CSV格式,记录每轮损失)
- **predictions/**: 预测结果(CSV格式,包含真实值和预测值)
- **visualizations/**: 综合可视化图表(模型对比、散点图)
- **training_curves_2/**, **training_logs_2/**, **predictions_2/**: 第二版对应结果

#### **documentation/** - 项目文档
- `航空发动机剩余寿命预测2025.docx`: 课程设计原始文档

#### **augment_caption/** - 说明文档
- `项目完整说明文档.md`: 完整技术文档(推荐阅读)
- `数据预处理报告.md`: 数据预处理详细说明
- `模型训练总结报告.md`: 模型训练结果总结
- `模型架构优化实验总结报告.md`: 第二版优化实验报告
- `项目架构概览.md`: 本文档

#### **augment_test/** - 测试脚本
- `data_analysis.py`: 数据探索性分析脚本
- `read_docx.py`: Word文档读取工具

---

## 🔄 三、项目工作流程

### 3.1 完整流程图

```
原始数据 → 数据预处理 → 模型训练 → 结果评估 → 可视化报告
```

### 3.2 详细步骤

#### **步骤1: 数据预处理**
- **输入**: `train_FD001.csv`, `test_FD001.csv`, `RUL_FD001.csv`
- **处理**:
  1. 加载原始数据
  2. 计算训练集RUL标签(最大周期 - 当前周期)
  3. 识别并移除常量特征(7个)
  4. Z-score标准化(保存均值和标准差)
  5. 生成完整特征版本(14个特征)
  6. 识别高相关性特征并生成降维版本(10个特征)
- **输出**: 4个预处理CSV文件 + 标准化参数JSON
- **执行**: `uv run python src/run_preprocessing_and_visualization.py`

#### **步骤2: 数据可视化**
- **功能**: 生成数据探索性分析图表
  - 时间序列趋势图(传感器随时间变化)
  - 特征相关性热力图
  - RUL分布直方图
  - 特征分布箱线图
- **输出**: 保存在 `results/visualizations/`

#### **步骤3: 模型训练**
- **模型类型**:
  1. **随机森林**: 传统机器学习基线模型
  2. **LSTM**: 长短期记忆网络(捕捉时间依赖)
  3. **Transformer**: 自注意力机制(并行处理序列)

- **训练配置**:
  - 时间窗口: 30或50个时间步
  - 批次大小: 64
  - 学习率: 0.001
  - 优化器: Adam
  - 损失函数: MSE
  - 早停策略: 验证集损失20轮不下降

- **执行**:
  - 第一版: `uv run python src/train_all_models.py`
  - 第二版: `uv run python src/train_all_models_v2.py`

#### **步骤4: 结果评估**
- **评估指标**:
  - RMSE(均方根误差): 主要指标
  - MAE(平均绝对误差): 辅助指标
  - R²(决定系数): 拟合优度

- **最佳模型**(第二版):
  - LSTM_large_reduced_seq50: RMSE=15.89
  - Transformer_large_reduced_seq50: RMSE=16.12

#### **步骤5: 可视化与报告**
- **自动生成**:
  - 训练损失曲线(训练集vs验证集)
  - 预测散点图(真实值vs预测值)
  - 模型对比柱状图(RMSE对比)
  - Markdown格式总结报告

---

## ⚙️ 四、关键配置文件

### 4.1 pyproject.toml
- **作用**: 项目依赖管理和元数据配置
- **核心依赖**:
  - `torch>=2.9.0`: 深度学习框架
  - `scikit-learn>=1.7.2`: 机器学习库
  - `pandas>=2.3.3`: 数据处理
  - `matplotlib>=3.10.7`, `seaborn>=0.13.2`: 可视化

### 4.2 normalization_params.json
- **作用**: 保存数据标准化参数,确保训练集和测试集使用相同的标准化
- **内容**: 每个特征的均值(mean)和标准差(std)

---

## 🎯 五、快速使用指南

### 5.1 首次运行
```bash
# 1. 安装依赖
uv sync

# 2. 数据预处理和可视化
uv run python src/run_preprocessing_and_visualization.py

# 3. 训练所有模型(第二版)
uv run python src/train_all_models_v2.py

# 4. 查看结果
# - 模型文件: models_2/
# - 训练日志: results/training_logs_2/
# - 可视化图表: results/training_curves_2/, results/visualizations/
# - 总结报告: augment_caption/模型架构优化实验总结报告.md
```

### 5.2 单独训练某个模型
```bash
# 训练随机森林
uv run python src/train_random_forest.py

# 训练深度学习模型(LSTM或Transformer)
uv run python src/train_deep_learning_v2.py
```

---

## 📊 六、项目特点

### 6.1 数据特点
- ✅ 无缺失值,数据质量高
- ✅ 多变量时间序列(21个传感器)
- ⚠️ 包含7个常量特征需要移除
- ⚠️ 特征间存在高相关性(需要降维)

### 6.2 技术亮点
1. **模块化设计**: 数据处理、模型定义、训练、可视化完全解耦
2. **版本管理**: 保留第一版和第二版代码,便于对比实验
3. **自动化流程**: 一键执行数据预处理、模型训练、结果可视化
4. **完整文档**: 详细的代码注释和说明文档
5. **实验对比**: 系统性对比不同模型架构、序列长度、特征版本

---

## 📝 七、注意事项

1. **数据预处理**: 必须先运行预处理脚本生成处理后的数据
2. **标准化参数**: 测试集必须使用训练集的标准化参数
3. **时间窗口**: 序列长度(seq_length)影响模型性能,需要实验调优
4. **GPU加速**: 深度学习模型训练建议使用GPU(自动检测)
5. **早停策略**: 防止过拟合,但可能导致训练不充分

---

## 🔗 八、相关文档链接

- **完整技术文档**: [项目完整说明文档.md](./项目完整说明文档.md)
- **数据预处理**: [数据预处理报告.md](./数据预处理报告.md)
- **模型训练**: [模型训练总结报告.md](./模型训练总结报告.md)
- **优化实验**: [模型架构优化实验总结报告.md](./模型架构优化实验总结报告.md)
- **项目README**: [../README.md](../README.md)

---

**文档结束** | 如有疑问,请参考上述相关文档或查看源代码注释

